<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue Component Registration</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- CSS import -->
    <link rel="stylesheet" href="../css/reset.css">

</head>

<body>
    <xmp>
        Vue 컴포넌트 만드는 방법을 배운다.

        왜 컴포넌트를 사용하는가?
            ==> 컴포넌트를 재사용하기 위해서.

        1. Vue 컴포넌트 만드는 방법을 실습. 페이지 53 참조
        2. 지역 컴포넌트를 인스턴스에 등록하는 방법 실습. 페이지 55 참조
        3. 인스턴스에서 컴포넌트로 데이터를 넘겨는 방법 실습. 페이지 65 참조

        전역 컴포넌트 템플릿
        <div>
            전역 컴포넌트가 등록되었습니다!
            <button onclick="gclick">{{propsdata}}</button>
        </div>

        지역 컴포넌트 템플릿
        <div>
            지역 컴포넌트가 등록되었습니다!
            <span style="border: 1px dashed blue; background-color:lightgray; padding: 5px;"
                  onclick="lclick">
                {{localmsg}}
            </span>
        </div>

        [참조]
        1. 교재 page 53,55,65
        2. https://kr.vuejs.org/v2/guide/components.html
        3. https://kr.vuejs.org/v2/guide/components.html#Prop-검증
    </xmp>
    <hr>

    <div id="app">
        <h2>컴포넌트 등록</h2>
        <!-- 부모의 변수를 자식으로 내릴때는 props로 이용한다. -->
        <!-- 변수명은 인스턴스나 전역/지역컴포넌트의 data에 한군데에서만 사용할 수 있다. -->
        <!-- html태그의 " = "를 기준으로 (왼편)자식 = (오른편)부모를 판단한다. -->
        <!-- propsdata = globalmsg1은 (왼편)자식 = (오른편)부모의 관계이다. -->
        <!-- 부모(인스턴스)의 data에 변수를 만들었으면 자식은 props에 만들어져야 한다. -->
        <global-component v-bind:propsdata="globalmsg1"></global-component>
        <global-component v-bind:propsdata="globalmsg2"></global-component>
        <hr>
        <local-component v-bind:localmsg="localmsg1"></local-component>
        <local-component v-bind:localmsg="localmsg2"></local-component>
    </div>
</body>

</html>

<!-- vue 플러그인 임포트   -->

<script src="https://unpkg.com/vue@2.6.14/dist/vue.js">/* vue 플러그인 임포트 */</script>
<script>
    //전역 컴퍼넌트 만들기
    Vue.component("global-component", { // <<<<태그명 = 컴퍼넌트 이름 입력
        /* pdtmc^2w */
        props: ['propsdata'] , //부모로부터 받을 변수명을 문자열로 입력
        data: function() {
            /* 컴포넌트 안에서 사용되는 변수 등록. 개별 변수 */
            return {
                // propsdata: null,
            }
        },
        template: `
        <div>
            전역 컴포넌트가 등록되었습니다!
            <button v-on:click="gclick">{{propsdata}}</button>
        </div>
        `, //화면 출렵부분은 template에 붙여넣는다.
        methods: {
            /* 이벤트 핸들러 등록 + 일반 함수 */
            gclick () {

            }
        },
        components: {
            /* 전역 컴포넌트는 등록하지 않는다. */
            /* 지역 컴포넌트나 파일 컴포넌트이면 등록해야 한다 . 예시) "태그명" : 컴포넌트명 */

        },
        computed: {
            /* 자동처리 + 동기식. 변수명이 메서드 명이다. 메서드로 작성. return 필수. data 와 공존 불가  */

        },
        watch: {
            /* 자동처리 + 비동기식. data 에 등록된 프로퍼티(변수) 모니터링. 메서드로 작성. 매개변수 필수. 외부 api 호출을 위해서 사용 */

        },
        mounted() {
            console.log("mounted");
        },
        updated() {
            console.log("updated");
        },
    });


    //지역 컴퍼넌트 만들기
    const localComponent = {
        /* pdtmc^2w */
        props: ['localmsg'] ,
        data: function() {
            /* 컴포넌트 안에서 사용되는 변수 등록. 개별 변수 */
            return {
                // localmsg: null,
            }
        },
        template: `
        <div>
            지역 컴포넌트가 등록되었습니다!
            <span style="border: 1px dashed blue; background-color:lightgray; padding: 5px;"
                v-on:click="lclick">
                {{localmsg}}
            </span>
        </div>
        `,
        methods: {
            /* 이벤트 핸들러 등록 + 일반 함수 */
            lclick () {

            },
        },
        components: {
            /* 전역 컴포넌트는 등록하지 않는다. */
            /* 지역 컴포넌트나 파일 컴포넌트이면 등록해야 한다 . 예시) "태그명" : 컴포넌트명 */

        },
        computed: {
            /* 자동처리 + 동기식. 변수명이 메서드 명이다. 메서드로 작성. return 필수. data 와 공존 불가  */

        },
        watch: {
            /* 자동처리 + 비동기식. data 에 등록된 프로퍼티(변수) 모니터링. 메서드로 작성. 매개변수 필수. 외부 api 호출을 위해서 사용  */

        },
        mounted() {
            console.log("mounted");
        },
        updated() {
            console.log("updated");
        },
    };

    //인스턴스 만들기
    new Vue({
        /* edtmc^2w */
        el: '#app',
        data: {
            /* 인스턴스 안에서 사용되는 변수 등록, 공유 변수 */
            globalmsg1: '인스턴스에서 전역 컴퍼넌트로 넘겨진 메세지1',
            globalmsg2: '인스턴스에서 전역 컴퍼넌트로 넘겨진 메세지2',
            localmsg1: '인스턴스에서 지역 컴퍼넌트로 넘겨진 메세지1',
            localmsg2: '인스턴스에서 지역 컴퍼넌트로 넘겨진 메세지1',

        },
        //template: ``,
        methods: {
            /* 이벤트 핸들러 등록 + 일반 함수 */

        },
        components: {
            /* 전역 컴포넌트는 등록하지 않는다. */
            /* 지역 컴포넌트나 파일 컴포넌트이면 등록해야 한다 . 예시) "태그명" : 컴포넌트명 */
            'local-component': localComponent,
        },
        computed: {
            /* 자동처리 + 동기식. 변수명이 메서드 명이다. 메서드로 작성. return 필수.  data 와 공존 불가 */

        },
        watch: {
            /* 자동처리 + 비동기식. data 에 등록된 프로퍼티(변수) 모니터링. 메서드로 작성. 매개변수 필수. 외부 api 호출을 위해서 사용 */

        },
        mounted() {
            console.log("mounted");
        },
        updated() {
            console.log("updated");
        },
    });


</script>